### Heap Files

주 파일 기법 중 `Heap file`은 삽입된 순서대로 레코드를 저장하는 방식이다. 레코드 수집을 위한 목적으로 사용된다.

`Heap File`에서의 탐색

- 만약 레코드가 유일하다면? 탐색하는데 걸리는 시간 평균 _record / 2_ 만큼
- 만약 레코드가 유일하지 않다면? 탐색하는 걸리는 시간 _record_ 만큼

`Heap File`에서의 삽입

- 파일의 마지막 디스크 블록을 버퍼로 `load`한다.
- 새로운 레코드를 작성한다.
- 버퍼의 내용을 다시 디스크로 작성하여 갱신한다.

`Heap File`에서의 삭제

- 레코드가 담긴 블록을 찾는다.
- 찾은 디스크 블록을 버퍼로 `load`한다.
- 지우려는 레코드를 버퍼에서 지운다.
- 버퍼의 내용을 다시 디스크로 작성하여 갱신한다.

`Heap File`의 특징

- 삭제 시 해당 레코드 부분이 비어있어 공간의 효율성이 줄어든다.
- 삭제되었음을 표시하기 위해 `deletion marker`를 레코드에 표시한다.

`External sorting` 기법

- 파일의 크기가 메모리에 비해 클 때 정렬하기 위한 기법
  - 전체 파일을 메모리의 크기만큼 잘라 메모리에 적재될 수 있도록 한다.
  - 메모리에 적재된 `subfile`을 정렬시켜 `sorted subfile`을 얻는다. `sorted subfile`은 별도의 `temporary file`에 작성한다.
  - `temporary file`이 전부 차면 새로운 `temporary merge file`에 병합하여 작성한다.
  - 위 과정을 거쳐 최종적인 `final result file`을 얻는다.
  - **파일의 크기에 3배 만큼 공간이 필요하다**
